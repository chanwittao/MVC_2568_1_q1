<!--
  File: src/views/student/enroll.ejs
  Role: View ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö "‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤ - ‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ô"
  Update:
    - ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ï‡∏≤‡∏° "‡∏£‡∏´‡∏±‡∏™‡∏ß‡∏¥‡∏ä‡∏≤" (subject_id) => ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ q
    - ‡πÉ‡∏ä‡πâ‡∏ü‡∏¥‡∏•‡∏î‡πå 'instructor' ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏™‡∏î‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå‡∏ú‡∏π‡πâ‡∏™‡∏≠‡∏ô
  Context:
    - ‡∏ù‡∏±‡πà‡∏á Controller (/student/enroll GET) ‡∏à‡∏∞‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•:
        term       => ‡πÄ‡∏ó‡∏≠‡∏°‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô (1 ‡∏´‡∏£‡∏∑‡∏≠ 2)
        q          => ‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ (optional)
        compulsory => ‡∏£‡∏≤‡∏¢‡∏ß‡∏¥‡∏ä‡∏≤‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡πÄ‡∏ó‡∏≠‡∏°‡∏ô‡∏±‡πâ‡∏ô ‡πÜ ‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô
        gened      => ‡∏£‡∏≤‡∏¢‡∏ß‡∏¥‡∏ä‡∏≤ GenEd ‡∏ó‡∏µ‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥
-->

<h2>‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ô (‡πÄ‡∏ó‡∏≠‡∏° <%= term %>)</h2>

<!-- ‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ï‡∏≤‡∏° "‡∏£‡∏´‡∏±‡∏™‡∏ß‡∏¥‡∏ä‡∏≤"
     - action = "/student/enroll"
     - hidden input: term (‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ redirect ‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏ó‡∏≠‡∏°‡πÄ‡∏î‡∏¥‡∏°)
     - input: q = ‡πÉ‡∏ä‡πâ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏£‡∏´‡∏±‡∏™‡∏ß‡∏¥‡∏ä‡∏≤ (‡πÄ‡∏ä‡πà‡∏ô 0550...)
     - ‡∏õ‡∏∏‡πà‡∏° submit: "‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤"
     - ‡∏•‡∏¥‡∏á‡∏Å‡πå reset: ‡∏•‡πâ‡∏≤‡∏á‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤
-->
<form method="get" action="/student/enroll" style="margin:10px 0;">
  <input type="hidden" name="term" value="<%= term %>">
  <input name="q" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏£‡∏´‡∏±‡∏™‡∏ß‡∏¥‡∏ä‡∏≤ ‡πÄ‡∏ä‡πà‡∏ô 0550..." value="<%= q || '' %>">
  <button type="submit">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</button>
  <a href="/student/enroll?term=<%= term %>">‡∏•‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</a>
</form>

<!-- ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ß‡∏¥‡∏ä‡∏≤‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö (compulsory) -->
<h3>üìå ‡∏£‡∏≤‡∏¢‡∏ß‡∏¥‡∏ä‡∏≤‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö</h3>
<% if (compulsory.length === 0) { %>
  <!-- ‡∏ñ‡πâ‡∏≤‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏•‡∏á‡∏Ñ‡∏£‡∏ö‡πÅ‡∏•‡πâ‡∏ß -->
  <p>‡∏Ñ‡∏∏‡∏ì‡∏•‡∏á‡∏Ñ‡∏£‡∏ö‡πÅ‡∏•‡πâ‡∏ß</p>
<% } else { %>
  <table border="1" cellpadding="6">
    <tr>
      <th>‡∏£‡∏´‡∏±‡∏™</th>
      <th>‡∏ä‡∏∑‡πà‡∏≠‡∏ß‡∏¥‡∏ä‡∏≤</th>
      <th>‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏Å‡∏¥‡∏ï</th>
      <th>‡∏ú‡∏π‡πâ‡∏™‡∏≠‡∏ô</th>
      <th></th>
    </tr>
    <% compulsory.forEach(c => { %>
      <tr>
        <!-- ‡∏î‡∏∂‡∏á‡∏Ñ‡πà‡∏≤‡∏°‡∏≤‡∏à‡∏≤‡∏Å‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (Subjects) -->
        <td><%= c.subject_id %></td>
        <td><%= c.name_th %></td>
        <td><%= c.credits %></td>
        <td><%= c.instructor %></td> <!-- ‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå‡∏ú‡∏π‡πâ‡∏™‡∏≠‡∏ô -->
        <td>
          <!-- ‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏ß‡∏¥‡∏ä‡∏≤‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö
               method=post ‡πÑ‡∏õ‡∏¢‡∏±‡∏á /student/enroll
               hidden: subject_id, term
               submit: ‡πÄ‡∏û‡∏¥‡πà‡∏° -->
          <form method="post" action="/student/enroll">
            <input type="hidden" name="subject_id" value="<%= c.subject_id %>">
            <input type="hidden" name="term" value="<%= term %>">
            <button type="submit">‡πÄ‡∏û‡∏¥‡πà‡∏°</button>
          </form>
        </td>
      </tr>
    <% }) %>
  </table>
<% } %>

<!-- ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ß‡∏¥‡∏ä‡∏≤ GenEd (gened) -->
<h3 style="margin-top:20px;">‚ú® ‡∏ß‡∏¥‡∏ä‡∏≤ GenEd ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥</h3>
<% if (gened.length === 0) { %>
  <p>‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ß‡∏¥‡∏ä‡∏≤ GenEd ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥</p>
<% } else { %>
  <table border="1" cellpadding="6">
    <tr>
      <th>‡∏£‡∏´‡∏±‡∏™</th>
      <th>‡∏ä‡∏∑‡πà‡∏≠‡∏ß‡∏¥‡∏ä‡∏≤</th>
      <th>‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏Å‡∏¥‡∏ï</th>
      <th>‡∏ú‡∏π‡πâ‡∏™‡∏≠‡∏ô</th>
      <th></th>
    </tr>
    <% gened.forEach(g => { %>
      <tr>
        <!-- ‡∏î‡∏∂‡∏á‡∏Ñ‡πà‡∏≤‡∏°‡∏≤‡∏à‡∏≤‡∏Å‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (Subjects) -->
        <td><%= g.subject_id %></td>
        <td><%= g.name_th %></td>
        <td><%= g.credits %></td>
        <td><%= g.instructor %></td> <!-- ‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå‡∏ú‡∏π‡πâ‡∏™‡∏≠‡∏ô -->
        <td>
          <!-- ‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ß‡∏¥‡∏ä‡∏≤ GenEd
               method=post ‡πÑ‡∏õ‡∏¢‡∏±‡∏á /student/enroll
               hidden: subject_id, term
               submit: ‡πÄ‡∏û‡∏¥‡πà‡∏° -->
          <form method="post" action="/student/enroll">
            <input type="hidden" name="subject_id" value="<%= g.subject_id %>">
            <input type="hidden" name="term" value="<%= term %>">
            <button type="submit">‡πÄ‡∏û‡∏¥‡πà‡∏°</button>
          </form>
        </td>
      </tr>
    <% }) %>
  </table>
<% } %>